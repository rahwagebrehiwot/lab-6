<html>
<head>
    <title>Vue.js Pet Depot</title>
    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.js">
    </script>

</head>
<div>
    <header>
    </header>
    <main>

        <div v-else>
            <div class="row">

        <button class="btn btn-primary btn-lg"
                v-on:click="addToCart"
                v-if="canAddToCart">Add to cart</button>
        <button disabled="true" class="btn btn-primary btn-lg"
                v-else >Add to cart</button>
        <span class="inventory-message"
              v-if="product.availableInventory - cartItemCount < 5">


        <button class="btn btn-primary btn-lg"
                v-on:click="addToCart"
                v-if="canAddToCart">Add to cart</button>
        <button disabled="true" class="btn btn-primary btn-lg"
                v-else >Add to cart</button>
        <span class="inventory-message"
              v-if="product.availableInventory - cartItemCount === 0">All Out!
         </span>
        <span class="inventory-message"
              v-else-if="product.availableInventory - cartItemCount < 5">
              Only {{product.availableInventory - cartItemCount}} left!
        </span>
        <span class="inventory-message"
              v-else>Buy Now!
        </span>

        <span class="inventory-message"
              v-else>Buy Now!
        </span>
        <div class="rating">
            <span v-for="n in 5"></span>
        </div>
        <span class="inventory-message"
              v-else>Buy Now!
        </span>
        <div class="rating">
          <span  v-bind:class="{'rating-active': checkRating(n)}"
                 v-for="n in 5">
            </span>
        </div>

        <div v-if="showProduct">
            <div class="row product">

                <div v-if="showProduct">
                    <div v-for="product in products">
                        <div class="row">
                            <div class="col-md-5 col-md-offset-0">
                                <figure>
                                    <img class="product" v-bind:src="product.image">
                                </figure>
                            </div>
                            <div class="col-md-6 col-md-offset-0 description">
                                ...
                            </div><!-- end of row-->
                            <hr />
                        </div><!-- end of v-for-->
                    </div><!-- end of showProduct-->
                    <span class="inventory-message"
                          v-else>Buy Now!
            </span>
                    <div class="rating">
              <span  v-bind:class="{'rating-active': checkRating(n, product)}"
                     v-for="n in 5" >
              </span>
                    </div>

                    <button class="btn btn-primary btn-lg"
                            v-on:click="addToCart(product)"
                            v-if="canAddToCart(product)">Add to cart</button>

                    //5.19
                    addToCart(aProduct) {
                    this.cart.push( aProduct.id );
                    },
                    <span class="inventory-message"
                          v-if="product.availableInventory - cartCount(product.id) === 0">
                          All Out!
                    </span>
                    <span class="inventory-message"
                          v-else-if="product.availableInventory - cartCount(product.id) < 5">
                           Only {{product.availableInventory - cartCount(product.id)}} left!
                    </span>
                    <span class="inventory-message"
                          v-else>Buy Now!
                    </span>

                    <div v-if="showProduct">
                        <div v-for="product in sortedProducts">
                            <div class="row">

    </main>


</div>
<script type="text/javascript">
    var APP_LOG_LIFECYCLE_EVENTS = true;
    var webstore = new Vue({
        el: '#app',
        data: {
                sitename: "Vue.js Pet Depot",
                showProduct: true,
                product: {
                    id: 1001,
                    title: "Cat Food, 25lb bag",
                    description: "A 25 pound bag of <em>irresistible</em>, organic goodness for your cat.",
                    price: 2000,
                    image: "cat.png",
                    availableInventory: 10,
                    rating: 3
                },

        methods: {
            checkRating(n, myProduct) {
                return this.myproduct.rating - n >= 0;
            },
            created: function() {
                axios.get('./products.json')
                    .then((response) =>{
                        this.products=response.data.products;
                        console.log(this.products);
                    });
            },

            business: 'Business Address',
            home: 'Home Address',
            gift:'',
            sendGift: 'Send As A Gift',
            dontSendGift: 'Do Not Send As A Gift'
            },
            products: [],



            canAddToCart(aProduct) {
                return aProduct.availableInventory > this.cartCount(aProduct.id);
            },
            cartCount(id) {
                let count = 0;
                for(var i = 0; i < this.cart.length; i++) {
                    if (this.cart[i] === id) {
                        count++;
                    }
                }
                return count;
            },
            sortedProducts() {
                if (this.products.length > 0) {
                    let productsArray = this.products.slice(0);

                    function compare(a, b) {
                        if (a.title.toLowerCase() < b.title.toLowerCase())
                            return -1;
                        if (a.title.toLowerCase() > b.title.toLowerCase())
                            return 1;
                        return 0;
                    }

                    return productsArray.sort(compare);
                }
        })
</script>




//
// //5.8
//
//
// {
// "products":[
// {
// "id": 1001,
// "title": "Cat Food, 25lb bag",
// "description": "A 25 pound bag of <em>irresistible</em>, organic
// goodness for your cat.",
// "price": 2000,
// "image": "assets/images/product-fullsize.png",
// "availableInventory": 10,
// "rating": 1
// },
// {
// "id": 1002,
// "title": "Yarn",
// "description": "Yarn your cat can play with for a very
// <strong>long</strong> time!",
// "price": 299,
// "image": "assets/images/yarn.jpg",
// "availableInventory": 7,
// "rating": 1
// },
// {
// "id": 1003,
// "title": "Kitty Litter",
// "description": "Premium kitty litter for your cat.",
// "price": 1100,
// "image": "assets/images/cat-litter.jpg",
// "availableInventory": 99,
// "rating": 4
// },
// {
// "id": 1004,
// "title": "Cat House",
// "description": "A place for your cat to play!",
// "price": 799,
// "image": "assets/images/cat-house.jpg",
// "availableInventory": 11,
// "rating": 5
// },
// {
// "id": 1005,
// "title": "Laser Pointer",
// "description": "Drive your cat crazy with this <em>amazing</em>
// product.",
// "price": 4999,
// "image": "assets/images/laser-pointer.jpg",
// "availableInventory": 25,
// "rating": 1
// }
// ]
// }



